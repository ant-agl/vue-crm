{"version":3,"file":"js/585.32b9e86b.js","mappings":"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","sources":["webpack://VueCRM/./src/views/PlanningView.vue","webpack://VueCRM/./src/components/PlanningRow.vue","webpack://VueCRM/./src/components/PlanningRow.vue?17f6","webpack://VueCRM/./src/views/PlanningView.vue?9fd6"],"sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>Планирование</h3>\n      <h4>{{ $filters.currency(info.bill) }}</h4>\n    </div>\n\n    <AppLoader v-if=\"loading\" />\n\n    <p v-else-if=\"categories.length == 0\" class=\"center\">\n      Категорий пока нет.\n      <router-link to=\"/categories\">Создать новую категорию</router-link>\n    </p>\n\n    <section v-else>\n      <div v-if=\"categoriesOutcome.length\">\n        <h5>Расходы</h5>\n        <PlanningRow\n          v-for=\"cat in categoriesOutcome\"\n          :key=\"cat.id\"\n          :category=\"cat\"\n        />\n      </div>\n      <hr v-if=\"categoriesOutcome.length && categoriesIncome.length\" />\n      <div v-if=\"categoriesIncome.length\">\n        <h5>Доходы</h5>\n        <PlanningRow\n          v-for=\"cat in categoriesIncome\"\n          :key=\"cat.id\"\n          :category=\"cat\"\n        />\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport PlanningRow from \"@/components/PlanningRow\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  components: { PlanningRow },\n  data: () => ({\n    loading: true,\n  }),\n  computed: {\n    ...mapGetters([\"info\", \"categories\", \"records\"]),\n    categoriesOutcome() {\n      let categoriesOutcome = [];\n      this.categories\n        .filter((c) => c.type === \"outcome\")\n        .forEach((cat) => {\n          const spend = this.records\n            .filter((r) => r.categoryId === cat.id)\n            .reduce((total, r) => {\n              return (total += r.sum);\n            }, 0);\n\n          const progressPercent = (spend / cat.limit) * 100;\n          const progressColor =\n            progressPercent < 60\n              ? \"green\"\n              : progressPercent < 95\n              ? \"orange\"\n              : \"red\";\n\n          const tooltipeVal = cat.limit - spend;\n          const tooltipeText = `${\n            tooltipeVal > 0 ? \"Осталось\" : \"Превышение на\"\n          } ${this.$filters.currency(Math.abs(tooltipeVal))}`;\n          categoriesOutcome.push({\n            ...cat,\n            spend,\n            progressColor,\n            progressPercent,\n            tooltipeText,\n          });\n        });\n\n      return categoriesOutcome;\n    },\n    categoriesIncome() {\n      let categoriesIncome = [];\n      this.categories\n        .filter((c) => c.type === \"income\")\n        .forEach((cat) => {\n          const spend = this.records\n            .filter((r) => r.categoryId === cat.id)\n            .reduce((total, r) => {\n              return (total += r.sum);\n            }, 0);\n\n          const progressPercent = (spend / cat.limit) * 100;\n          const progressColor = \"green\";\n\n          const tooltipeVal = cat.limit - spend;\n          const tooltipeText = `${\n            tooltipeVal > 0\n              ? \"Еще планируется получить\"\n              : \"Вы получили больше на\"\n          } ${this.$filters.currency(Math.abs(tooltipeVal))}`;\n          categoriesIncome.push({\n            ...cat,\n            spend,\n            progressColor,\n            progressPercent,\n            tooltipeText,\n          });\n        });\n\n      return categoriesIncome;\n    },\n  },\n  async mounted() {\n    if (!this.records.length) await this.$store.dispatch(\"fetchRecords\");\n    if (!this.categories.length) await this.$store.dispatch(\"fetchCategories\");\n    this.loading = false;\n  },\n};\n</script>\n\n<style scoped>\nhr {\n  border: none;\n  height: 1px;\n  width: 100%;\n  background-color: rgba(51, 51, 51, 0.12);\n  margin: 50px 0 35px;\n}\n</style>\n","<template>\n  <div>\n    <p>\n      <strong>{{ category.title }}:</strong>\n      {{ $filters.currency(category.spend) }} из\n      {{ $filters.currency(category.limit) }}\n    </p>\n    <div class=\"progress\" v-tooltipe=\"category.tooltipeText\">\n      <div\n        class=\"determinate\"\n        :class=\"[category.progressColor]\"\n        :style=\"{ width: category.progressPercent + '%' }\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    category: Object,\n  },\n};\n</script>\n","import { render } from \"./PlanningRow.vue?vue&type=template&id=cac994e8\"\nimport script from \"./PlanningRow.vue?vue&type=script&lang=js\"\nexport * from \"./PlanningRow.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/antonaglushevich/Documents/learn/vue/vue-crm/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PlanningView.vue?vue&type=template&id=9bc9586c&scoped=true\"\nimport script from \"./PlanningView.vue?vue&type=script&lang=js\"\nexport * from \"./PlanningView.vue?vue&type=script&lang=js\"\n\nimport \"./PlanningView.vue?vue&type=style&index=0&id=9bc9586c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/antonaglushevich/Documents/learn/vue/vue-crm/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9bc9586c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","_ctx","$filters","currency","info","bill","loading","_createBlock","_component_AppLoader","key","categories","length","_hoisted_3","_createVNode","_component_router_link","to","_hoisted_4","$options","categoriesOutcome","_hoisted_5","_hoisted_6","_Fragment","_renderList","cat","_component_PlanningRow","id","category","categoriesIncome","_hoisted_7","_hoisted_8","_hoisted_9","$props","title","spend","limit","_normalizeClass","progressColor","style","_normalizeStyle","width","progressPercent","tooltipeText","props","Object","__exports__","components","PlanningRow","data","computed","mapGetters","this","filter","c","type","forEach","records","r","categoryId","reduce","total","sum","tooltipeVal","Math","abs","push","async","$store","dispatch","render"],"sourceRoot":""}